<!-- FullCalendar JS -->
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>

<script>
  $(document).ready(function () {
    function checkBookingUpdate() {
      console.log('Checking booking updates')
      $.ajax({
        url: "{% url 'check_booking_update' %}",
        type: 'GET',
        success: function (response) {
          if (response.updated) {
            console.log('Booking updates detected')
            //updateCalendarEvents()
            window.location.reload()
          }
        },
        error: function (xhr, status, error) {
          console.error('Error checking booking updates:', error)
        }
      })
    }
  
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏∏‡∏Å‡πÜ 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    setInterval(checkBookingUpdate, 60000)
  })
</script>

{% comment %} <script>
  function updateDateTime() {
    const now = new Date();
    const options = { day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit', minute: '2-digit' };
    const formattedDateTime = now.toLocaleDateString('th-TH', options).replace(',', ' üïí');
    document.getElementById("currentDateTime").textContent = formattedDateTime;
  }

  updateDateTime(); // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
  setInterval(updateDateTime, 1000); // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
</script> {% endcomment %}

<script>
  function updateDateTime() {
    const now = new Date()
  
    // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô, ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞ ‡∏õ‡∏µ
    const dayName = now.toLocaleDateString('en', { weekday: 'long' })
    const day = now.getDate()
    const monthName = now.toLocaleDateString('en', { month: 'long' })
    const year = now.getFullYear()
    const hours = now.getHours().toString().padStart(2, '0')
    const minutes = now.getMinutes().toString().padStart(2, '0')
  
    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ "st", "nd", "rd", ‡∏´‡∏£‡∏∑‡∏≠ "th" ‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
    const daySuffix = (day) => {
      if (day >= 11 && day <= 13) return 'th'
      switch (day % 10) {
        case 1:
          return 'st'
        case 2:
          return 'nd'
        case 3:
          return 'rd'
        default:
          return 'th'
      }
    }
  
    const formattedDateTime = `${dayName} ${day}${daySuffix(day)} ${monthName} ${year} ${hours}:${minutes}`
  
    document.getElementById('currentDateTime').textContent = formattedDateTime
  }
  
  updateDateTime() // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
  setInterval(updateDateTime, 1000) // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
</script>
